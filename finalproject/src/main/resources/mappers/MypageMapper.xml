<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="org.zerock.myapp.mapper.MypageMapper">

    <select id="mywrite" resultType="org.zerock.myapp.domain.MywriteVO">
        SELECT uids,title, insert_ts, 'freeboard' as board_name, fid as bno
        FROM free_board a
        WHERE uids = #{uids}
        
        UNION ALL
        
        SELECT uids,title, insert_ts, 'qna' as board_name, qid as bno
        FROM qna_board a
        WHERE uids = #{uids}
    </select>
    
    <select id="mycomment" resultType="org.zerock.myapp.domain.MycommentVO">
       	SELECT uids,content, insert_ts
        FROM fb_comment
        WHERE uids = #{uids}
        
        UNION ALL
        
        SELECT uids,content, insert_ts
        FROM plan_comment
        WHERE uids = #{uids}
    </select>
    
    <select id="checklist" resultType="org.zerock.myapp.domain.ChecklistVO">
       	SELECT *
        FROM checklist
        WHERE uids = #{uids}
    </select>
    
    <insert id="listadd">
      Insert into checklist(uids, item, memo) 
      values(#{uids}, #{item}, #{memo})
    </insert>
    
    <update id="listupdate">
        UPDATE checklist
        SET item = #{item},
        	memo = #{memo}
        WHERE
            cid = #{cid}
    </update>
    
    <delete id="listdelete">
        DELETE FROM checklist
        WHERE cid = #{cid}
    </delete>
    
    <select id="likes" resultType="org.zerock.myapp.domain.LikesVO">
       	SELECT *
        FROM likes
        WHERE uids = #{uids}
    </select>
    
    <select id="bookmark" resultType="org.zerock.myapp.domain.BookmarkVO">
        SELECT fid, 'fb_bookmark' as board_name, fbmid as bno
        FROM fb_bookmark a
        WHERE uids = #{uids}
        
        UNION ALL
        
        SELECT pid, 'plan_bookmark' as board_name, pbmid as bno
        FROM plan_bookmark a
        WHERE uids = #{uids}
    </select>
 

  </mapper>
  
 
